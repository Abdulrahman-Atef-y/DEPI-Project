@model IEnumerable<Data_Access_Layer.Entities.Booking>
@{
    ViewData["Title"] = "إدارة الحجوزات";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<link rel="stylesheet" href="~/css/admin-room.css" asp-append-version="true" />
<div class="admin-index-root">
    <div class="admin-header">
        <h2 class="admin-title"><i class="fas fa-calendar-alt"></i> إدارة الحجوزات</h2>
    </div>

    <div class="admin-table-wrapper">
        <div class="admin-table-container">
            <table class="table admin-table">
        <thead>
            <tr>
                <th>رقم الحجز</th>
                <th>العميل</th>
                <th>الغرفة</th>
                <th>التاريخ</th>
                <th>المجموع</th>
                <th>الحالة</th>
                <th>إجراءات</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>#BK-@item.Id</td>
                    <td>@item.Guest.FirstName @item.Guest.LastName</td>
                    <td>@item.Room.RoomNumber</td>
                    <td>@item.CheckInDate.ToShortDateString()</td>
                    <td>@item.TotalPrice.ToString("C0")</td>
                    <td>
                       <span class="booking-status @(item.Status.ToLower())">
						@(
							item.Status == "Pending" ? "قيد الانتظار" :
							item.Status == "Confirmed" ? "مؤكد" :
							item.Status == "Cancelled" ? "ملغي" : "غير معروف"
							)</span>
                    </td>
                            <td class="admin-action-group">
                                <a asp-action="ChangeStatus" asp-route-id="@item.Id" asp-route-status="Confirmed" class="admin-action-btn admin-edit">تأكيد</a>
                        <form asp-action="Cancel" asp-route-id="@item.Id" method="post"
                              onsubmit="return confirm('هل أنت متأكد من إلغاء هذا الحجز؟');"
                                      style="display:inline;">
                                    <button type="submit" class="admin-action-btn admin-cancel">
                                إلغاء
                            </button>
                        </form>
                                <form asp-action="Delete" asp-route-id="@item.Id" method="post"
                                      onsubmit="return confirm('هل أنت متأكد من حذف هذا الحجز نهائياً؟');"
                                      style="display:inline;">
                                    <button type="submit" class="admin-action-btn admin-delete">
                                        حذف
                                    </button>
                                </form>

                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>